{% extends 'base_tailwind.html' %}
{% load static %}

{% block title %}Reports - LoanVista{% endblock %}

{% block extra_css %}
<style>
    .report-card {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .report-card:hover {
        transform: translateY(-8px) scale(1.02);
    }
    
    .gradient-bg {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    
    .glass-effect {
        backdrop-filter: blur(10px);
        background: rgba(255, 255, 255, 0.1);
    }
</style>
{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-50">
    <!-- Header Section -->
    <div class="gradient-bg text-white py-16 mb-8 rounded-2xl mx-4">
        <div class="max-w-7xl mx-auto px-6">
            <div class="flex items-center justify-between">
                <div class="flex-1">
                    <div class="flex items-center mb-4">
                        <i class="fas fa-chart-pie text-4xl mr-4"></i>
                        <h1 class="text-5xl font-bold">Reports & Analytics</h1>
                    </div>
                    <p class="text-xl opacity-90 max-w-2xl">
                        Generate comprehensive reports and analyze your loan portfolio performance with advanced analytics and insights
                    </p>
                </div>
                <div class="hidden lg:block">
                    <div class="glass-effect rounded-full p-8">
                        <i class="fas fa-analytics text-6xl opacity-60"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Reports Grid -->
    <div class="max-w-7xl mx-auto px-6 mb-12">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            {% for report in reports %}
            <div class="report-card bg-white rounded-2xl shadow-lg hover:shadow-2xl border border-gray-100 overflow-hidden group">
                <div class="p-8 text-center h-full flex flex-col">
                    <div class="mb-6">
                        <div class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl mb-4 group-hover:scale-110 transition-transform duration-300">
                            <i class="{{ report.icon }} text-2xl text-white"></i>
                        </div>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 mb-3">{{ report.name }}</h3>
                    <p class="text-gray-600 flex-grow mb-6 leading-relaxed">{{ report.description }}</p>
                    <div class="mt-auto">
                        <a href="{% url report.url %}" class="inline-flex items-center justify-center w-full px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl">
                            <i class="fas fa-arrow-right mr-2"></i>
                            View Report
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- Quick Stats Section -->
    <div class="max-w-7xl mx-auto px-6 mb-12">
        <div class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden">
            <div class="bg-gradient-to-r from-gray-50 to-blue-50 px-8 py-6 border-b border-gray-200">
                <h2 class="text-2xl font-bold text-gray-900 flex items-center">
                    <i class="fas fa-tachometer-alt mr-3 text-blue-600"></i>
                    Quick Overview
                </h2>
            </div>
            <div class="p-8">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                    <div class="text-center group">
                        <div class="inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-2xl mb-4 group-hover:bg-blue-200 transition-colors duration-300">
                            <i class="fas fa-file-contract text-2xl text-blue-600"></i>
                        </div>
                        <h3 class="text-3xl font-bold text-gray-900 mb-2">{{ total_loans|default:0 }}</h3>
                        <p class="text-gray-600 font-medium">Total Loans</p>
                    </div>
                    
                    <div class="text-center group">
                        <div class="inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-2xl mb-4 group-hover:bg-green-200 transition-colors duration-300">
                            <i class="fas fa-money-bill-wave text-2xl text-green-600"></i>
                        </div>
                        <h3 class="text-3xl font-bold text-gray-900 mb-2">K{{ total_disbursed|floatformat:0|default:0 }}</h3>
                        <p class="text-gray-600 font-medium">Total Disbursed</p>
                    </div>
                    
                    <div class="text-center group">
                        <div class="inline-flex items-center justify-center w-16 h-16 bg-purple-100 rounded-2xl mb-4 group-hover:bg-purple-200 transition-colors duration-300">
                            <i class="fas fa-credit-card text-2xl text-purple-600"></i>
                        </div>
                        <h3 class="text-3xl font-bold text-gray-900 mb-2">K{{ total_collected|floatformat:0|default:0 }}</h3>
                        <p class="text-gray-600 font-medium">Total Collected</p>
                    </div>
                    
                    <div class="text-center group">
                        <div class="inline-flex items-center justify-center w-16 h-16 bg-orange-100 rounded-2xl mb-4 group-hover:bg-orange-200 transition-colors duration-300">
                            <i class="fas fa-users text-2xl text-orange-600"></i>
                        </div>
                        <h3 class="text-3xl font-bold text-gray-900 mb-2">{{ active_borrowers|default:0 }}</h3>
                        <p class="text-gray-600 font-medium">Active Borrowers</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Additional Features Section -->
    <div class="max-w-7xl mx-auto px-6 mb-12">
        <div class="bg-gradient-to-br from-blue-600 to-purple-700 rounded-2xl p-8 text-white">
            <div class="text-center">
                <h2 class="text-3xl font-bold mb-4">Advanced Analytics Coming Soon</h2>
                <p class="text-xl opacity-90 mb-6 max-w-2xl mx-auto">
                    We're working on advanced predictive analytics, risk assessment tools, and automated reporting features to enhance your decision-making process.
                </p>
                <div class="flex flex-wrap justify-center gap-4">
                    <span class="px-4 py-2 bg-white bg-opacity-20 rounded-full text-sm font-medium">
                        <i class="fas fa-brain mr-2"></i>AI-Powered Insights
                    </span>
                    <span class="px-4 py-2 bg-white bg-opacity-20 rounded-full text-sm font-medium">
                        <i class="fas fa-shield-alt mr-2"></i>Risk Assessment
                    </span>
                    <span class="px-4 py-2 bg-white bg-opacity-20 rounded-full text-sm font-medium">
                        <i class="fas fa-robot mr-2"></i>Automated Reports
                    </span>
                    <span class="px-4 py-2 bg-white bg-opacity-20 rounded-full text-sm font-medium">
                        <i class="fas fa-chart-network mr-2"></i>Predictive Analytics
                    </span>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Animate cards on scroll with staggered effect
    const cards = document.querySelectorAll('.report-card');
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry, index) => {
            if (entry.isIntersecting) {
                setTimeout(() => {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0) scale(1)';
                }, index * 100); // Staggered animation
            }
        });
    }, {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    });
    
    cards.forEach(card => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(30px) scale(0.95)';
        card.style.transition = 'all 0.6s cubic-bezier(0.4, 0, 0.2, 1)';
        observer.observe(card);
    });
    
    // Animate stats counters
    const statNumbers = document.querySelectorAll('.text-3xl');
    
    const animateCounter = (element) => {
        const target = parseInt(element.textContent.replace(/[^\d]/g, ''));
        const duration = 2000;
        const step = target / (duration / 16);
        let current = 0;
        
        const timer = setInterval(() => {
            current += step;
            if (current >= target) {
                current = target;
                clearInterval(timer);
            }
            
            const prefix = element.textContent.includes('K') ? 'K' : '';
            element.textContent = prefix + Math.floor(current).toLocaleString();
        }, 16);
    };
    
    const statsObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                animateCounter(entry.target);
                statsObserver.unobserve(entry.target);
            }
        });
    });
    
    statNumbers.forEach(stat => {
        statsObserver.observe(stat);
    });
    
    // Add floating animation to icons
    const icons = document.querySelectorAll('.fas');
    icons.forEach(icon => {
        icon.addEventListener('mouseenter', function() {
            this.style.transform = 'scale(1.1) rotate(5deg)';
        });
        
        icon.addEventListener('mouseleave', function() {
            this.style.transform = 'scale(1) rotate(0deg)';
        });
    });
    
    // Add ripple effect to buttons
    const buttons = document.querySelectorAll('a[class*="bg-gradient"]');
    buttons.forEach(button => {
        button.addEventListener('click', function(e) {
            const ripple = document.createElement('span');
            const rect = this.getBoundingClientRect();
            const size = Math.max(rect.width, rect.height);
            const x = e.clientX - rect.left - size / 2;
            const y = e.clientY - rect.top - size / 2;
            
            ripple.style.cssText = `
                position: absolute;
                width: ${size}px;
                height: ${size}px;
                left: ${x}px;
                top: ${y}px;
                background: rgba(255, 255, 255, 0.3);
                border-radius: 50%;
                transform: scale(0);
                animation: ripple 0.6s linear;
                pointer-events: none;
            `;
            
            this.style.position = 'relative';
            this.style.overflow = 'hidden';
            this.appendChild(ripple);
            
            setTimeout(() => {
                ripple.remove();
            }, 600);
        });
    });
    
    // Add CSS animation for ripple effect
    const style = document.createElement('style');
    style.textContent = `
        @keyframes ripple {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }
    `;
    document.head.appendChild(style);
});
</script>
{% endblock %}